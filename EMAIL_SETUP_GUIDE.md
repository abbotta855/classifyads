# Email Configuration Guide for OTP System

## Current Status
The OTP system is working, but emails are currently being **logged** instead of **sent** because the mail driver is set to `log`.

## Quick Solutions

### Option 1: Gmail SMTP (Recommended for Development/Testing)

Add these to your `.env` file:

```env
MAIL_MAILER=smtp
MAIL_HOST=smtp.gmail.com
MAIL_PORT=587
MAIL_USERNAME=your-email@gmail.com
MAIL_PASSWORD=your-app-password
MAIL_ENCRYPTION=tls
MAIL_FROM_ADDRESS=your-email@gmail.com
MAIL_FROM_NAME="${APP_NAME}"
```

**Important for Gmail:**
1. Enable 2-Factor Authentication on your Gmail account
2. Generate an **App Password** (not your regular password):
   - Go to: https://myaccount.google.com/apppasswords
   - Create an app password for "Mail"
   - Use that 16-character password in `MAIL_PASSWORD`

### Option 2: Mailtrap (Best for Development/Testing)

Mailtrap is a fake SMTP server that catches all emails - perfect for testing!

1. Sign up at https://mailtrap.io (free tier available)
2. Create an inbox
3. Copy the SMTP credentials
4. Add to `.env`:

```env
MAIL_MAILER=smtp
MAIL_HOST=smtp.mailtrap.io
MAIL_PORT=2525
MAIL_USERNAME=your-mailtrap-username
MAIL_PASSWORD=your-mailtrap-password
MAIL_ENCRYPTION=tls
MAIL_FROM_ADDRESS=noreply@yourdomain.com
MAIL_FROM_NAME="${APP_NAME}"
```

### Option 3: SendGrid (Production Ready)

1. Sign up at https://sendgrid.com
2. Create an API key
3. Add to `.env`:

```env
MAIL_MAILER=smtp
MAIL_HOST=smtp.sendgrid.net
MAIL_PORT=587
MAIL_USERNAME=apikey
MAIL_PASSWORD=your-sendgrid-api-key
MAIL_ENCRYPTION=tls
MAIL_FROM_ADDRESS=noreply@yourdomain.com
MAIL_FROM_NAME="${APP_NAME}"
```

### Option 4: Mailgun (Production Ready)

1. Sign up at https://mailgun.com
2. Verify your domain
3. Add to `.env`:

```env
MAIL_MAILER=mailgun
MAIL_FROM_ADDRESS=noreply@yourdomain.com
MAIL_FROM_NAME="${APP_NAME}"
```

And add to `config/services.php`:
```php
'mailgun' => [
    'domain' => env('MAILGUN_DOMAIN'),
    'secret' => env('MAILGUN_SECRET'),
    'endpoint' => env('MAILGUN_ENDPOINT', 'api.mailgun.net'),
    'scheme' => 'https',
],
```

Then in `.env`:
```env
MAILGUN_DOMAIN=your-domain.com
MAILGUN_SECRET=your-mailgun-secret
```

## After Configuration

1. **Clear config cache:**
   ```bash
   php artisan config:clear
   ```

2. **Test email sending:**
   ```bash
   php artisan tinker
   ```
   Then run:
   ```php
   Mail::raw('Test email', function ($message) {
       $message->to('your-email@example.com')
               ->subject('Test Email');
   });
   ```

3. **Check your email inbox** (or Mailtrap inbox if using Mailtrap)

## For Now: Check Logs

Even with `log` driver, you can verify OTP is being generated by checking:

```bash
# Windows PowerShell
Get-Content storage/logs/laravel.log -Tail 100 | Select-String -Pattern "OTP"
```

The OTP code will be in the log file, so you can manually verify it works before setting up real email sending.

## Production Recommendations

For production, use:
- **SendGrid** (easy setup, good free tier)
- **Mailgun** (reliable, good for high volume)
- **AWS SES** (cost-effective for large scale)
- **Postmark** (excellent deliverability)

